let tasks=document.querySelector(".task_list").children;var lastwaschecked="-1";function filt(t){if("all"==t){for(i=0;i<tasks.length;i++)tasks[i].style.display="block";lastwaschecked="-1",all_but.classList.add("active"),chckd_but.classList.remove("active"),unchckd_but.classList.remove("active")}if("chckd"==t||"1"==lastwaschecked&&1==t){for(lastwaschecked="1",i=0;i<tasks.length;i++)tasks[i].lastChild.checked||(tasks[i].style.display="none"),tasks[i].lastChild.checked&&(tasks[i].style.display="block");all_but.classList.remove("active"),chckd_but.classList.add("active"),unchckd_but.classList.remove("active")}if("unchckd"==t||"0"==lastwaschecked&&1==t){for(i=0;i<tasks.length;i++)tasks[i].lastChild.checked||(tasks[i].style.display="block"),tasks[i].lastChild.checked&&(tasks[i].style.display="none");lastwaschecked="0",all_but.classList.remove("active"),chckd_but.classList.remove("active"),unchckd_but.classList.add("active")}if(1==t){let t=0;for(i=0;i<tasks.length;i++)tasks[i].lastChild.checked&&(t+=1);counter.innerText=tasks.length-t}}function del(t){t.parentNode.remove(),counter.innerText=tasks.length}function checkall_func(){let t=0;for(i=0;i<tasks.length;i++)tasks[i].lastChild.checked&&(t+=1);if(t!=tasks.length)for(i=0;i<tasks.length;i++)for(i=0;i<tasks.length;i++)tasks[i].lastChild.checked=!0;else for(i=0;i<tasks.length;i++)for(i=0;i<tasks.length;i++)tasks[i].lastChild.checked=!1;filt(1)}inp.addEventListener("keyup",(function(t){if("Enter"===t.key){let t=document.createElement("div");t.className="task_div",t.innerHTML="<button onClick='del(this)'>Удалить</button>"+inp.value+"<input type='checkbox' onClick='filt(1)'>",inp.value="","1"==lastwaschecked&&(t.style.display="none"),task_list.appendChild(t);let s=0;for(i=0;i<tasks.length;i++)tasks[i].lastChild.checked&&(s+=1);counter.innerText=tasks.length-s}}));